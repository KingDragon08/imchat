/**
	* @title 			弹窗插件【仿微信】wcPop-v1.0 beta (UTF-8)
	* @Create		hison
	* @Timer		2018/03/30 11:30:45 GMT+0800 (中国标准时间)
*/
!function(f){var g=f.document,d=g.documentElement,c=0,a={$:function(h){return g.getElementById(h)},touch:function(i,h){i.addEventListener("click",function(j){h.call(this,j)},!1)},jspath:function(){for(var j=g.getElementsByTagName("script"),h=j.length;h>0;h--){if(j[h-1].src&&j[h-1].src.match(/wcPop[\w\-\.]*\.js/)!=null){return j[h-1].src.substring(0,j[h-1].src.lastIndexOf("/")+1)}}},extend:function(k,j){for(var h in j){if(!(h in k)){k[h]=j[h]}}return k},timer:{},show:{},end:{}},e=function(i){var j=this,h={id:"wcPop",title:"",content:"",style:"",skin:"",icon:"",shade:true,shadeClose:true,anim:"scaleIn",time:0,zIndex:9999,btns:null};j.opts=a.extend(i,h);j.init()};e.prototype={init:function(){var k=this,h=k.opts,j=null,i=function(){if(!h.btns){return}var m="";for(var l in h.btns){m+='<span class="btn" data-index="'+l+'" style="'+(h.btns[l].style?h.btns[l].style:"")+'">'+h.btns[l].text+"</span>"}return m}();a.$(h.id)?(j=a.$(h.id)):(j=g.createElement("div"),j.id=h.id);h.skin&&(j.setAttribute("type",h.skin));j.setAttribute("index",c);j.setAttribute("class","wcPop wcPop"+c);j.innerHTML=['<div class="popui__modal-panel">',h.shade?('<div class="popui__modal-mask" style="z-index:'+(k.maxIndex()+1)+'"></div>'):"",'<div class="popui__panel-main" style="z-index:'+(k.maxIndex()+2)+'">						<div class="popui__panel-section">							<div class="popui__panel-child '+(h.anim?"anim-"+h.anim:"")+" "+(h.skin?"popui__"+h.skin:"")+'" style="'+h.style+'">',h.title?('<div class="popui__panel-tit">'+h.title+"</div>"):"",h.content?('<div class="popui__panel-cnt">'+(h.skin=="toast"&&h.icon?('<div class="popui__toast-icon"><img class="'+(h.icon=="loading"?"anim-loading":"")+'" src="'+a.jspath()+"skin/"+h.icon+'.png" /></div>'):"")+h.content+"</div>"):"",h.btns?'<div class="popui__panel-btn">'+i+"</div>":"","</div>						</div>					</div>				</div>"].join("");g.body.appendChild(j);g.getElementsByTagName("body")[0].classList.add("popui__overflow");h.show&&h.show.call(this);this.index=c++;k.callback()},callback:function(){var q=this,m=q.opts;if(m.time){a.timer[q.index]=setTimeout(function(){b.close(q.index)},m.time*1000)}if(m.btns){for(var n=a.$(m.id).getElementsByClassName("popui__panel-btn")[0].children,h=n.length,l=0;l<h;l++){a.touch(n[l],function(o){var i=this.getAttribute("data-index"),j=m.btns[i];typeof j.onTap==="function"&&j.onTap(o)})}}if(m.shade&&m.shadeClose){var p=a.$(m.id).getElementsByClassName("popui__modal-mask")[0];a.touch(p,function(){b.close(q.index)})}var k=a.$(m.id).getElementsByClassName("popui__panel-btn")[0];var l=a.$(m.id).getElementsByClassName("popui__modal-mask")[0];k&&k.addEventListener("contextmenu",function(i){i.preventDefault()},!1);l&&l.addEventListener("contextmenu",function(i){i.preventDefault()},!1);m.end&&(a.end[q.index]=m.end)},maxIndex:function(){for(var j=this.opts.zIndex,l=g.getElementsByTagName("*"),k=0,h=l.length;k<h;k++){j=Math.max(j,l[k].style.zIndex)}return j}};var b=(function(){fn=function(h){var i=new e(h);return i.index};fn.close=function(h){var h=h||"";var i=g.getElementsByClassName("wcPop"+h)[0];if(i){i.setAttribute("class","wcPop-close");setTimeout(function(){g.body.removeChild(i);clearTimeout(a.timer[h]);delete a.timer[h];typeof a.end[h||0]=="function"&&a.end[h||0].call(this);delete a.end[h||0]},200);g.getElementsByTagName("body")[0].classList.remove("popui__overflow")}};fn.closeAll=function(){for(var k=g.getElementsByClassName(["wcPop"]),j=0,h=k.length;j<h;j++){fn.close(0|k[0].getAttribute("index"))}};fn.load=function(k){for(var h=g.createElement("link"),l=g.getElementsByTagName("link"),j=l.length;j>0;j--){if(l[j-1].href==k){return}}h.type="text/css";h.rel="stylesheet";h.href=a.jspath()+k;g.getElementsByTagName("head")[0].appendChild(h)};fn.moreAPI=function(k,i,j){var h={title:k,content:i,time:j};fn(h)};return fn}());b.load("skin/wcPop.css");f.wcPop=b}(window);